---
- name: installation serveur bdd
  hosts: all
  become: yes
  
  tasks: 
    - name: install mariadb-server 
      apt:  mariadb-server
    - name: install python3-pymysql 
      apt:  python3-pymysql
    - name: install php 
      apt:  php 
    - name: start up the mariadb service 
      ansible.builtin.shell: "systemctl start mariadb"  
    - name: ensure mariadb is enabled to run on startup  
      ansible.builtin.service: 
      name: mariadb 
        state: started 
        enabled: yes
    - name: Set the root password
      mysql_user:
        name: root
        password: azerty
        login_unix_socket: /var/run/mysqld/mysqld.sock
